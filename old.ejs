<div class="flex justify-between items-center container mx-auto mt-10 px-5">
    <h5 class="text-md text-center font-semibold">
        <i class="fa-solid fa-location-dot"></i>
        <%= place.nameEn %>
    </h5>

    <div class="">
        <h4 class="text-md text-center font-bold">Queues - <%= queues.length %>
        </h4>
    </div>
</div>






<div class="queues-container my-10">

    <% if (queues.length> 0) { %>
        <% queues.forEach(queue=> { %>
            <div class="queue-item flex justify-between items-center bg-base-200 p-4 mb-2">
                <p class="text-lg font-semibold">
                    <i class="fa-solid fa-clock"></i>
                    <span class="ml-2">Queue</span>
                    <span class="text-primary font-bold">#<%= queue.queue %></span>
                </p>
                <div>
                    <a href="/subscriber/change/queue/to/active/<%= queue._id %>"
                        class="btn btn-primary btn-sm">Active</a>
                    <button class="btn btn-primary btn-sm speak-btn" data-queue="<%= queue.queue %>">
                        <i class="fa-solid fa-microphone"></i>
                    </button>
                </div>
            </div>
            <% }) %>
                <% } else { %>
                    <div class="text-center text-lg text-gray-500 py-6">
                        <i class="fa-solid fa-face-smile-beam text-2xl text-black mb-2"></i>
                        <p class="text-black">No queues today 🎉</p>
                    </div>
                    <% } %>


</div>



<script>
    document.querySelectorAll('.speak-btn').forEach(button => {
        button.addEventListener('click', () => {
            const queueNumber = button.getAttribute('data-queue');

            // الرسالة بالإنجليزية
            const msgEnglish = new SpeechSynthesisUtterance(`Queue number ${queueNumber}, please proceed.`);
            msgEnglish.lang = 'en-US';

            // الرسالة بالعربية
            const msgArabic = new SpeechSynthesisUtterance(`الرقم ${queueNumber}، تفضل`);
            msgArabic.lang = 'ar-SA';

            // نطق الإنجليزية أولاً
            window.speechSynthesis.speak(msgEnglish);

            // ننتظر انتهاء الصوت الإنجليزي، ثم 5 ثواني، ثم نطق العربي
            msgEnglish.onend = () => {
                setTimeout(() => {
                    window.speechSynthesis.speak(msgArabic);
                }, 5000); // 5000 ميلي ثانية = 5 ثواني
            };
        });
    });
</script>