<div class="flex justify-between items-center container mx-auto mt-10 px-5">
    <h5 class="text-md text-center font-semibold">
        <i class="fa-solid fa-location-dot"></i>
        <%= place.nameEn %>
    </h5>

    <div class="">
        <h4 class="text-md text-center font-bold">Queues - <%= queues.length %>
        </h4>
    </div>
</div>






<div class="queues-container my-10">

    <% if (queues.length> 0) { %>
        <% queues.forEach(queue=> { %>
            <div class="queue-item flex justify-between items-center bg-base-200 p-4 mb-2">
                <p class="text-lg font-semibold">
                    <i class="fa-solid fa-clock"></i>
                    <span class="ml-2">Queue</span>
                    <span class="text-primary font-bold">#<%= queue.queue %></span>
                </p>
                <div>
                    <a href="/subscriber/change/queue/to/active/<%= queue._id %>"
                        class="btn btn-primary btn-sm">Active</a>
                    <button class="btn btn-primary btn-sm speak-btn" data-queue="<%= queue.queue %>">
                        <i class="fa-solid fa-microphone"></i>
                    </button>
                </div>
            </div>
            <% }) %>
                <% } else { %>
                    <div class="text-center text-lg text-gray-500 py-6">
                        <i class="fa-solid fa-face-smile-beam text-2xl text-black mb-2"></i>
                        <p class="text-black">No queues today ðŸŽ‰</p>
                    </div>
                    <% } %>


</div>



<script>
    document.querySelectorAll('.speak-btn').forEach(button => {
        button.addEventListener('click', () => {
            const queueNumber = button.getAttribute('data-queue');

            // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
            const msgEnglish = new SpeechSynthesisUtterance(`Queue number ${queueNumber}, please proceed.`);
            msgEnglish.lang = 'en-US';

            // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            const msgArabic = new SpeechSynthesisUtterance(`Ø§Ù„Ø±Ù‚Ù… ${queueNumber}ØŒ ØªÙØ¶Ù„`);
            msgArabic.lang = 'ar-SA';

            // Ù†Ø·Ù‚ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
            window.speechSynthesis.speak(msgEnglish);

            // Ù†Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØŒ Ø«Ù… 5 Ø«ÙˆØ§Ù†ÙŠØŒ Ø«Ù… Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø±Ø¨ÙŠ
            msgEnglish.onend = () => {
                setTimeout(() => {
                    window.speechSynthesis.speak(msgArabic);
                }, 5000); // 5000 Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ© = 5 Ø«ÙˆØ§Ù†ÙŠ
            };
        });
    });
</script>