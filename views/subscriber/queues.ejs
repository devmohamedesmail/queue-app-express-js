<div class="container px-2 m-auto">


    <div class="my-10 queues-container">

        <% if (queues.length> 0) { %>
            <% queues.forEach(queue=> { %>
                <div class="flex items-center justify-between p-4 mb-2 queue-item bg-base-200">
                    <div class="flex items-center text-lg font-semibold">

                        <img src="/assets/images/waiting.svg" class="w-10 h-10" alt="">
                        <span class="ml-4">Queue</span>
                        <span class="font-bold text-primary">#<%= queue.queue %></span>
                    </div>
                    <div>
                        <a href="/subscriber/change/queue/to/active/<%= queue._id %>"
                            class="btn btn-primary btn-sm">Active</a>
                        <button class="btn btn-primary btn-sm speak-btn" data-queue="<%= queue.queue %>">
                            <i class="fa-solid fa-microphone"></i>
                        </button>
                    </div>
                </div>
                <% }) %>
                    <% } else { %>
                        <div class="py-6 text-lg text-center text-gray-500">
                            <i class="mb-2 text-2xl text-black fa-solid fa-face-smile-beam"></i>
                            <p class="text-black">No queues today ðŸŽ‰</p>
                        </div>
                        <% } %>


    </div>

</div>






<script>
    document.querySelectorAll('.speak-btn').forEach(button => {
        button.addEventListener('click', () => {
            const queueNumber = button.getAttribute('data-queue');

            // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
            const msgEnglish = new SpeechSynthesisUtterance(`Queue number ${queueNumber}, please proceed.`);
            msgEnglish.lang = 'en-US';

            // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            const msgArabic = new SpeechSynthesisUtterance(`Ø§Ù„Ø±Ù‚Ù… ${queueNumber}ØŒ ØªÙØ¶Ù„`);
            msgArabic.lang = 'ar-SA';

            // Ù†Ø·Ù‚ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
            window.speechSynthesis.speak(msgEnglish);

            // Ù†Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØŒ Ø«Ù… 5 Ø«ÙˆØ§Ù†ÙŠØŒ Ø«Ù… Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø±Ø¨ÙŠ
            msgEnglish.onend = () => {
                setTimeout(() => {
                    window.speechSynthesis.speak(msgArabic);
                }, 5000); // 5000 Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ© = 5 Ø«ÙˆØ§Ù†ÙŠ
            };
        });
    });
</script>